/*! For license information please see transform.js.LICENSE.txt */
(()=>{var e={299:(e,t,r)=>{"use strict";var n=r(798);function o(e){return!0===n(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,r;return!1!==o(e)&&"function"==typeof(t=e.constructor)&&!1!==o(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},798:e=>{"use strict";e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},998:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(110),o=r(830),i=["em","ex","ch","rem","vw","vh","vmin","vmax","px","mm","cm","in","pt","pc","Q","vm"],s=["deg","grad","turn","rad"],a=["s","ms"],u=["Hz","kHz"],c=["dpi","dpcm","dppm"],p=["fr"],l=i.map((e=>e.toLowerCase())),h=s.map((e=>e.toLowerCase())),f=a.map((e=>e.toLowerCase())),y=u.map((e=>e.toLowerCase())),d=c.map((e=>e.toLowerCase())),v=p.map((e=>e.toLowerCase()));function b(e,t,r,n){const{source:o}=t;return new e(r,n,o)}t.newPunctuator=function(e,t){if(","===e.value||")"===e.value)return b(o.Punctuator,e,e.value,t);throw new Error(`illegal argument error "${e.value}"`)},t.newOperator=function(e,t){return b(o.Operator,e,e.value,t)},t.newString=function(e,t){return b(o.StringNode,e,e.value,t)},t.newWordNode=function(e,t){return function(e,t){if("word"===e.type){const r=n(e.value);if(r){const n=function(e,t,r){const{source:n}=t;if(!e.unit)return new o.NumberValue(e.number,r,n);const b=e.unit.toLowerCase();function m(t,o){const i=new t(e.number,o,r,n);return o!==e.unit&&(i.raws.unit={raw:e.unit,value:o}),i}let g;return(g=l.indexOf(b))>=0?m(o.LengthValue,i[g]):(g=h.indexOf(b))>=0?m(o.AngleValue,s[g]):(g=f.indexOf(b))>=0?m(o.TimeValue,a[g]):(g=y.indexOf(b))>=0?m(o.FrequencyValue,u[g]):(g=d.indexOf(b))>=0?m(o.ResolutionValue,c[g]):(g=v.indexOf(b))>=0?m(o.FlexValue,p[g]):"%"===b?m(o.PercentageValue,"%"):null}(r,e,t);if(n)return n}}return b(o.Word,e,e.value,t)}(e,t)},t.newFunction=function(e,t,r){return new o.FunctionNode(e.value,t,{start:e.source.start,end:r.source.end})},t.newParentheses=function(e,t){return new o.Parentheses(t,{start:e.source.start,end:e.source.end})},t.newMathExpression=function(e,t,r){const n="string"==typeof t?b(o.Operator,{source:{start:{index:0},end:{index:0}}},t," "):t,{before:i}=e.raws;return e.raws.before="",new o.MathExpression(e,n,r,i,{start:e.source.start,operator:n.source,end:r.source.end})}},54:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(988);t.Parser=n.Parser;var o=r(966);t.Tokenizer=o.Tokenizer;var i=r(109);t.Stringifier=i.Stringifier;var s=r(876);t.getResolvedType=s.getResolvedType;var a=r(780);t.reduceExpression=a.reduce;var u=r(998);t.newMathExpression=u.newMathExpression},988:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(404),o=r(830),i=r(998),s=r(922),a=r(35),u=/^([^-+0-9.]|-[^+0-9.])/u,c={"*":3,"/":3,"+":2,"-":2};function p(e){return e.source||{start:{index:0},end:{index:0}}}function l(e){return e&&"Punctuator"!==e.type&&"Operator"!==e.type?e:null}t.Parser=class{constructor(e,t){this.tokenizer=e,this.root=new o.Root({start:{index:0},end:{index:0}}),this.rescans=[],this.tokens=this.root.tokens,this.errors=this.root.errors}parse(){let e={container:this.root,fnName:"",post(){},eof(){}};for(;e;)e=this.processExpressions(e);const{tokens:t}=this;return t.length>0&&(p(this.root).end.index=t[t.length-1].source.end.index),this.errors.unshift(...this.tokenizer.errors),this.errors.sort(((e,t)=>e.index-t.index)),this.root}reportParseError(e,t=0){if(this.errors.find((r=>r.code===e&&r.index===t)))return;const r=n.ParseError.fromCode(e,t);this.errors.push(r)}processExpressions(e){let t;for(;t=this.scan();){const{token:r}=t;switch(r.type){case"word":if(u.test(r.value)){const n=this.scan();if(n){if(!n.raws&&"punctuator"===n.token.type&&"("===n.token.value)return this.processFunction(r,t.raws,n.token,e);this.back(n)}}e.container.push(i.newWordNode(r,t.raws));break;case"string":e.container.push(i.newString(r,t.raws));break;case"operator":this.checkAndMergeMathExpr(e,c[r.value]),e.container.push(i.newOperator(r,t.raws));break;case"punctuator":return this.checkAndMergeMathExpr(e),this.processPunctuator(r,t.raws,e)}}return this.postStack(e),e.eof(),null}checkAndMergeMathExpr(e,t){const{container:r}=e,{nodes:n}=r;if(n.length>=3){const o=n[n.length-2];if("Operator"===o.type&&c[o.value]&&(null==t||t<=c[o.value])){const t=this.mergeMathExpr(e);t&&r.push(t)}}}processPunctuator(e,t,r){const{container:n,parent:o}=r;if("("===e.value){const o=i.newParentheses(e,t);return n.push(o),this.createNestedStateContainer(o,r.fnName,r)}if(this.postStack(r),")"===e.value){if(o)return r.post(e,t),o;this.reportParseError("unexpected-parenthesis",e.source.start.index)}return n.push(i.newPunctuator(e,t)),r}processFunction(e,t,r,n){const o=i.newFunction(e,t,r);return n.container.push(o),this.createNestedStateContainer(o,o.name,n)}createNestedStateContainer(e,t,r){return{container:e,parent:r,fnName:t,post(t,r){r&&(e.raws.beforeClose=r),p(e).end=t.source.end},eof:()=>{e.unclosed=!0;const t=this.tokens[this.tokens.length-1],n=e.last;n&&(p(e).end=p(n).end),this.reportParseError("eof-in-bracket",t.source.end.index),r.eof()}}}mergeMathExpr(e){const{container:{nodes:t}}=e,r=t.pop(),n=t.pop(),o=t.pop()||null,u=()=>{o&&t.push(o),t.push(n,r)},c=t=>{s.isMathFunction(e.fnName)&&this.reportParseError("unexpected-calc-token",p(t).start.index)},h=l(r);if(a.isComma(n))return h||c(r),u(),null;if(!o)return c(l(n)?r:n),u(),null;const f=l(o);return f?"Operator"!==n.type?(c(n),u(),null):h?i.newMathExpression(f,n,h):(c(r),u(),null):(c(l(t[t.length-1])?n:o),u(),null)}postStack(e){const{container:t}=e,{nodes:r}=t;for(;r.length>1;){const r=this.mergeMathExpr(e);if(!r)return;t.push(r)}}scan(){const e=this.rescans.shift();if(e)return e;let t="",r=this.tokenizer.nextToken();for(;r;){if(this.tokens.push(r),"whitespace"!==r.type&&"comment"!==r.type&&"inline-comment"!==r.type)return{token:r,raws:t};t+=r.value,r=this.tokenizer.nextToken()}return t&&(this.root.raws.after=t),null}back(e){this.rescans.unshift(e)}}},780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(922),o=r(35);function i(e){if("Number"===e.type||"Length"===e.type||"Angle"===e.type||"Time"===e.type||"Frequency"===e.type||"Resolution"===e.type||"Percentage"===e.type||"Flex"===e.type)return e;if("MathExpression"===e.type)return function(e){const t=i(e.left),r=i(e.right);if(!t||!r)return null;switch(e.operator){case"+":case"-":return function(e,t,r){if(e.type!==r.type)return null;const n="-"===t?(e,t)=>e-t:(e,t)=>e+t;return"Number"===e.type?{type:"Number",value:n(e.value,r.value)}:e.unit===r.unit?{type:e.type,value:n(e.value,r.value),unit:e.unit}:null}(t,e.operator,r);case"/":return function(e,t){return"Number"!==t.type?null:"Number"===e.type?{type:"Number",value:e.value/t.value}:{type:e.type,value:e.value/t.value,unit:e.unit}}(t,r);case"*":return function(e,t){return"Number"===e.type?"Number"===t.type?{type:"Number",value:e.value*t.value}:{type:t.type,value:e.value*t.value,unit:t.unit}:"Number"===t.type?{type:e.type,value:e.value*t.value,unit:e.unit}:null}(t,r)}return null}(e);if("Parentheses"===e.type||"Root"===e.type){if(1===e.nodes.length)return i(e.nodes[0])}else if("Function"===e.type&&"Function"===e.type&&n.isCalc(e.name))return function(e){const t=o.getFunctionArguments(e);return t&&1===t.length?i(t[0]):null}(e);return null}t.reduce=function(e){return i(e)}},876:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(922),o=r(35);function i(e){const t=s(e.left),r=s(e.right),{operator:n}=e;switch(n){case"+":case"-":return"Unknown"===t||"Unknown"===r?"Unknown":t===r?t:"Number"===t||"Number"===r?"invalid":"Percentage"===t?r:"Percentage"===r?t:"invalid";case"*":return"Unknown"===t||"Unknown"===r?"Unknown":"Number"===t?r:"Number"===r?t:"invalid";case"/":return"Unknown"===r?"Unknown":"Number"===r?t:"invalid"}return"Unknown"}function s(e){if("MathExpression"===e.type){const t=i(e);return"invalid"===t?"Unknown":t}return"Parentheses"===e.type?1===e.nodes.length?s(e.nodes[0]):"Unknown":"Function"===e.type?n.isCalc(e.name)?1===(t=e).nodes.length?a(t):"Unknown":n.isMin(e.name)||n.isMax(e.name)?a(e):n.isClamp(e.name)?function(e){return 5===e.nodes.length?a(e):"Unknown"}(e):"Unknown":function(e){const{type:t}=e;return"Number"===t||"Length"===t||"Angle"===t||"Time"===t||"Frequency"===t||"Resolution"===t||"Percentage"===t||"Flex"===t?t:"Unknown"}(e);var t}function a(e){const t=o.getFunctionArguments(e);if(!t)return"Unknown";const r=t.map(s);let n=null;for(const e of r)if(n&&"Percentage"!==n){if("Percentage"===e);else if(n!==e)return"Unknown"}else n=e;return n||"Unknown"}t.getResolvedType=i},109:(e,t)=>{"use strict";function r(e,t){const r=e.raws[t];return r?r.raw:`${e[t]}`}function n(e,t){return e.raws[t]||""}function o(e,t){return`${n(e,"before")}${t}`}function i(e){return o(e,`${r(e,"value")}${r(e,"unit")}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.Stringifier=class{constructor(e){this.options=Object.assign({autofix:!1},e||{})}stringify(e){return this[e.type](e)}Root(e){let t="";for(const r of e.nodes)t+=this.stringify(r);return t+=n(e,"after"),t}Function(e){let t=`${e.name}(`;for(const r of e.nodes)t+=this.stringify(r);return t+=n(e,"beforeClose"),!this.options.autofix&&e.unclosed||(t+=")"),o(e,t)}Parentheses(e){let t="(";for(const r of e.nodes)t+=this.stringify(r);return t+=n(e,"beforeClose"),!this.options.autofix&&e.unclosed||(t+=")"),o(e,t)}MathExpression(e){let t="",r=n(e,"between"),i="",s="";return this.options.autofix&&(r||(r=" "),e.right.raws.before||(i=" "),"MathExpression"===e.left.type&&("+"!==e.left.operator&&"-"!==e.left.operator||"*"!==e.operator&&"/"!==e.operator||(t+="(",r=`)${r}`)),"MathExpression"===e.right.type&&(("+"!==e.operator||"-"!==e.right.operator)&&("-"!==e.operator&&"*"!==e.operator||"+"!==e.right.operator&&"-"!==e.right.operator)&&"/"!==e.operator||(i+="(",s=`)${s}`))),o(e,`${t}${this.stringify(e.left)}${r}${e.operator}${i}${this.stringify(e.right)}${s}`)}Number(e){return o(e,r(e,"value"))}Punctuator(e){return o(e,e.value)}Word(e){return o(e,e.value)}String(e){return o(e,e.value)}Operator(e){return o(e,e.value)}Length(e){return i(e)}Angle(e){return i(e)}Time(e){return i(e)}Frequency(e){return i(e)}Resolution(e){return i(e)}Percentage(e){return i(e)}Flex(e){return i(e)}word(e){return e.value}punctuator(e){return e.value}operator(e){return e.value}whitespace(e){return e.value}comment(e){return e.value}string(e){return e.value}"inline-comment"(e){return e.value}}},966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(404),o=r(293);function i(e){return e===o.LPAREN||e===o.RPAREN||e===o.COMMA}function s(e){return o.isDigit(e)||e===o.DOT}function a(e){return e===o.DQUOTE||e===o.SQUOTE}function u(e){return e===o.LPAREN?o.RPAREN:e===o.LBRACE?o.RBRACE:o.RBRACKET}t.Tokenizer=class{constructor(e,t){this.lastCode=o.NULL,this.rescan=!1,this.token=null,this.lastTokenType=null,this.errors=[],this.text=e,this.offset=-1,this.state="SCAN",this.nextTokenOffset=0,this.options=Object.assign({allowInlineCommnets:!0},t||{})}nextToken(){for(;null==this.token;){const e=this.scan();if(this.state=this[this.state](e)||"SCAN",e===o.EOF&&!this.rescan)break}const{token:e}=this;return this.token=null,e}scan(){return this.rescan?(this.rescan=!1,this.lastCode):this.next()}next(){return this.offset<this.text.length&&this.offset++,this.offset>=this.text.length?this.lastCode=o.EOF:this.lastCode=this.text.charCodeAt(this.offset)}back(){this.rescan=!0}reportParseError(e){const t=n.ParseError.fromCode(e,this.offset);this.errors.push(t)}getCode(e=0){return this.text.charCodeAt(this.nextTokenOffset+e)}commitToken(e,t=0){const r=this.nextTokenOffset,n=this.offset+t+1,o=this.text.slice(r,n);this.token={type:e,value:o,source:{start:{index:r},end:{index:n}}},this.nextTokenOffset=n,this.lastTokenType=e}SCAN(e){return o.isWhitespace(e)?"WHITESPACE":e===o.DQUOTE?"DQUOTE":e===o.SQUOTE?"SQUOTE":e===o.SLASH?"SLASH":e===o.MINUS?"MINUS":e===o.PLUS?"PLUS":e===o.STAR?(this.commitToken("operator"),"SCAN"):i(e)?(this.commitToken("punctuator"),"SCAN"):e===o.LBRACKET?"LBRACKET":e===o.LBRACE?"LBRACE":e===o.EOF?"SCAN":"WORD"}WORD(e){for(;!o.isWhitespace(e)&&!i(e)&&e!==o.PLUS&&e!==o.STAR&&e!==o.SLASH&&!a(e)&&e!==o.EOF;){if(e===o.MINUS){const e=this.getCode();if(s(e)||(e===o.MINUS||e===o.PLUS)&&s(this.getCode(1)))return this.commitToken("word",-1),"MINUS"}else e!==o.LBRACE&&e!==o.LBRACKET&&e!==o.LPAREN||this.skipBrakets(this.next(),u(e));e=this.next()}this.commitToken("word",-1),this.back()}LBRACKET(e){return this.skipBrakets(e,o.RBRACKET),"WORD"}LBRACE(e){return this.skipBrakets(e,o.RBRACE),"WORD"}WHITESPACE(e){for(;o.isWhitespace(e);)e=this.next();this.commitToken("whitespace",-1),this.back()}SLASH(e){return e===o.STAR?"COMMENT":e===o.SLASH&&this.options.allowInlineCommnets?"INLINE_COMMENT":(this.commitToken("operator",-1),void this.back())}COMMENT(e){for(;e!==o.EOF;){if(e===o.STAR&&(e=this.next())===o.SLASH)return void this.commitToken("comment");e=this.next()}this.commitToken("comment",-1),this.reportParseError("eof-in-comment")}INLINE_COMMENT(e){for(;e!==o.EOF;){if(e===o.LF||e===o.FF)return void this.commitToken("inline-comment");if(e===o.CR)return(e=this.next())===o.LF?void this.commitToken("inline-comment"):(this.commitToken("inline-comment",-1),this.back());e=this.next()}this.commitToken("inline-comment",-1)}MINUS(e){return"word"===this.lastTokenType||e===o.EOF||e!==o.MINUS&&!s(e)&&!o.isLetter(e)?(this.commitToken("operator",-1),void this.back()):"WORD"}PLUS(e){if("word"!==this.lastTokenType&&s(e))return"WORD";this.commitToken("operator",-1),this.back()}DQUOTE(e){this.skipString(e,o.DQUOTE)}SQUOTE(e){this.skipString(e,o.SQUOTE)}skipBrakets(e,t){const r=[];for(;e!==o.EOF;){if(t===e){const e=r.pop()||null;if(!e)return;t=e}else e!==o.LBRACE&&e!==o.LBRACKET&&e!==o.LPAREN||(t&&r.push(t),t=u(e));e=this.next()}this.reportParseError("eof-in-bracket")}skipString(e,t){for(;e!==o.EOF;){if(e===o.BACKSLASH)e=this.next();else if(e===t)return void this.commitToken("string");e=this.next()}this.commitToken("string",-1),this.reportParseError("eof-in-string")}}},922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=/^(-(webkit|mox)-)?calc/iu,n=/^(-(webkit|mox)-)?min/iu,o=/^(-(webkit|mox)-)?max/iu,i=/^(-(webkit|mox)-)?clamp/iu;function s(e){return r.test(e)}function a(e){return n.test(e)}function u(e){return o.test(e)}function c(e){return i.test(e)}t.isCalc=s,t.isMin=a,t.isMax=u,t.isClamp=c,t.isMathFunction=function(e){return s(e)||c(e)||a(e)||u(e)}},830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(109);let o=null;class i{constructor(){this.parent=null}toString(e){return"function"==typeof e?e(this):(e||o||(o=new n.Stringifier)).stringify(this)}walk(e,t){const r=this;let n;const o=[...r.nodes||[],r.left,r.right].filter((e=>Boolean(e))),i="string"==typeof e?t=>t.type===e:t=>e.test(t.type);for(const r of o){if(i(r)&&(n=t(r),!1===n))break;if(r.walk&&(n=r.walk(e,t),!1===n))break}return n}}class s extends i{push(...e){for(const t of e)"Root"===t.type?this.push(...t.nodes):(t.parent=this,this.nodes.push(t));return this}unshift(...e){for(const t of e.reverse())"Root"===t.type?this.unshift(...t.nodes):(t.parent=this,this.nodes.unshift(t));return this}append(...e){return this.push(...e)}prepend(...e){return this.unshift(...e)}insertBefore(e,t){if("Root"===t.type){const{nodes:r}=t;if(1===r.length)return this.insertBefore(e,r[0]);throw new Error("The given Root node is illegal.")}const r=this.nodes.indexOf(e);if(r<0)throw new Error("The given node could not be found.");return t.parent=this,this.nodes.splice(r,0,t),this}insertAfter(e,t){if("Root"===t.type){const{nodes:r}=t;if(1===r.length)return this.insertAfter(e,r[0]);throw new Error("The given Root node is illegal.")}const r=this.nodes.indexOf(e);if(r<0)throw new Error("The given node could not be found.");return t.parent=this,this.nodes.splice(r+1,0,t),this}removeAll(){for(const e of this.nodes)e.parent=null;return this.nodes=[],this}removeChild(e){const t=this.nodes.indexOf(e);return this.nodes[t].parent=null,this.nodes.splice(t,1),this}get first(){return this.nodes[0]||null}get last(){return this.nodes[this.nodes.length-1]||null}}t.NumberValue=class extends i{constructor(e,t,r){super();const n=parseFloat(e);this.type="Number",this.value=n,this.raws={before:t,value:{raw:e,value:n}},this.source=r}};class a extends i{constructor(e,t,r,n,o){super();const i=parseFloat(t);this.type=e,this.value=i,this.unit=r,this.raws={before:n,value:{raw:t,value:i}},this.source=o}}t.LengthValue=class extends a{constructor(e,t,r,n){super("Length",e,t,r,n)}},t.AngleValue=class extends a{constructor(e,t,r,n){super("Angle",e,t,r,n)}},t.TimeValue=class extends a{constructor(e,t,r,n){super("Time",e,t,r,n)}},t.FrequencyValue=class extends a{constructor(e,t,r,n){super("Frequency",e,t,r,n)}},t.ResolutionValue=class extends a{constructor(e,t,r,n){super("Resolution",e,t,r,n)}},t.PercentageValue=class extends a{constructor(e,t,r,n){super("Percentage",e,t,r,n)}},t.FlexValue=class extends a{constructor(e,t,r,n){super("Flex",e,t,r,n)}};class u extends i{constructor(e,t,r,n){super(),this.type=e,this.value=t,this.raws={before:r},this.source=n}}function c(e,t,r){const n=Symbol(`${t}`);Object.defineProperties(e,{[n]:{writable:!0,enumerable:!1},[t]:{get(){return this[n]},set(e){const t=this[n];this[n]=r(e,t)},enumerable:!0}})}t.Word=class extends u{constructor(e,t,r){super("Word",e,t,r)}},t.StringNode=class extends u{constructor(e,t,r){super("String",e,t,r)}},t.MathExpression=class extends i{constructor(e,t,r,n,o){super();const i=t.value,s=t.raws.before;this.type="MathExpression";const a=(e,t)=>{let r;if("Root"===e.type){const{nodes:t}=e;if(1!==t.length)throw new Error("The given Root node is illegal.");r=t[0]}else r=e;return r.parent=this,t&&(t.parent=null),r};c(this,"left",a),this.left=e,this.operator=i,c(this,"right",a),this.right=r,this.raws={before:n,between:s},this.source=o}},t.FunctionNode=class extends s{constructor(e,t,r){super(),this.type="Function",this.name=e,this.nodes=[],this.raws={before:t},this.source=r}},t.Parentheses=class extends s{constructor(e,t){super(),this.type="Parentheses",this.nodes=[],this.raws={before:e},this.source=t}},t.Punctuator=class extends u{constructor(e,t,r){super("Punctuator",e,t,r)}},t.Root=class extends s{constructor(e){super(),this.type="Root",this.nodes=[],this.tokens=[],this.errors=[],this.raws={after:""},this.source=e}},t.Operator=class extends u{constructor(e,t,r){super("Operator",e,t,r)}}},293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EOF=-1,t.NULL=0,t.TAB=9,t.CR=13,t.LF=10,t.FF=12,t.SPACE=32,t.DQUOTE=34,t.SQUOTE=39,t.LPAREN=40,t.RPAREN=41,t.STAR=42,t.PLUS=43,t.COMMA=44,t.MINUS=45,t.DOT=46,t.SLASH=47,t.LBRACKET=91,t.BACKSLASH=92,t.RBRACKET=93,t.LBRACE=123,t.RBRACE=125,t.isWhitespace=function(e){return e===t.TAB||e===t.LF||e===t.FF||e===t.CR||e===t.SPACE},t.isDigit=function(e){return e>=48&&e<=57},t.isLetter=function(e){return e>=97&&e<=122||e>=65&&e<=90}},35:(e,t)=>{"use strict";function r(e){return"Punctuator"===e.type&&","===e.value}Object.defineProperty(t,"__esModule",{value:!0}),t.isComma=r,t.getFunctionArguments=function(e){const{nodes:t}=e,n=t[0];if(!n||r(n))return null;const o=[n],i=t.length;for(let e=1;e<i;e++){if(!r(t[e++]))return null;const n=t[e];if(!n||r(n))return null;o.push(n)}return o}},784:(e,t,r)=>{"use strict";const n=r(404),o=r(54);o.Parser,o.Tokenizer,o.Stringifier,o.getResolvedType,o.reduceExpression,o.newMathExpression,t.ZP={parse:function(e,t){const r=new o.Tokenizer(e,t);return new o.Parser(r,t).parse()},stringify:function(e,t){return new o.Stringifier(t).stringify(e)},getResolvedType:o.getResolvedType,reduceExpression:o.reduceExpression,mathExpr:o.newMathExpression,Parser:o.Parser,Tokenizer:o.Tokenizer,Stringifier:o.Stringifier,AST:n}},761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends SyntaxError{static fromCode(e,t){return new r(n[e],e,t)}constructor(e,t,r){super(e),this.code=t,this.index=r}}t.ParseError=r;const n={"eof-in-string":"Unclosed string","eof-in-comment":"Unclosed comment","eof-in-bracket":"Unclosed bracket","unexpected-parenthesis":"Unexpected token","unexpected-calc-token":"Unexpected token"}},404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(761))},110:e=>{var t="-".charCodeAt(0),r="+".charCodeAt(0),n=".".charCodeAt(0),o="e".charCodeAt(0),i="E".charCodeAt(0);e.exports=function(e){for(var s,a=0,u=e.length,c=!1,p=-1,l=!1;a<u;){if((s=e.charCodeAt(a))>=48&&s<=57)l=!0;else if(s===o||s===i){if(p>-1)break;p=a}else if(s===n){if(c)break;c=!0}else{if(s!==r&&s!==t)break;if(0!==a)break}a+=1}return p+1===a&&a--,!!l&&{number:e.slice(0,a),unit:e.slice(a)}}},86:(e,t,r)=>{"use strict";const n=r(299);function o(e,t,r,n){if(!a(e))return e;let u=n||{};const c=Array.isArray(t);if(!c&&"string"!=typeof t)return e;let p=u.merge;p&&"function"!=typeof p&&(p=Object.assign);const l=(c?t:function(e,t){const r=function(e,t){let r=e;if(void 0===t)return r+"";const n=Object.keys(t);for(let e=0;e<n.length;e++){const o=n[e];r+=";"+o+"="+String(t[o])}return r}(e,t);if(o.memo[r])return o.memo[r];const n=t&&t.separator?t.separator:".";let i=[],s=[];i=t&&"function"==typeof t.split?t.split(e):e.split(n);for(let e=0;e<i.length;e++){let t=i[e];for(;t&&"\\"===t.slice(-1)&&null!=i[e+1];)t=t.slice(0,-1)+n+i[++e];s.push(t)}return o.memo[r]=s,s}(t,u)).filter(s),h=l.length,f=e;if(!n&&1===l.length)return i(e,l[0],r,p),e;for(let t=0;t<h;t++){let n=l[t];if(a(e[n])||(e[n]={}),t===h-1){i(e,n,r,p);break}e=e[n]}return f}function i(e,t,r,o){o&&n(e[t])&&n(r)?e[t]=o({},e[t],r):e[t]=r}function s(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function a(e){return null!==e&&("object"==typeof e||"function"==typeof e)}o.memo={},e.exports=o}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";r.r(n),r.d(n,{default:()=>mr});var e,t,o=function(e,t){var r={};for(var n in"string"==typeof t&&(t=[].slice.call(arguments,1)),e)e.hasOwnProperty&&!e.hasOwnProperty(n)||-1===t.indexOf(n)&&(r[n]=e[n]);return r},i=r(86),s=r.n(i);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(t){var r=t.type?t.type:function(t){switch(t){case"color":case"colors":return e.COLOR;case"space":case"spacing":return e.SPACING;case"size":case"sizing":return e.SIZING;case"boxShadow":return e.BOX_SHADOW;case"borderRadius":return e.BORDER_RADIUS;case"borderWidth":return e.BORDER_WIDTH;case"opacity":return e.OPACITY;case"fontFamilies":return e.FONT_FAMILIES;case"fontWeights":return e.FONT_WEIGHTS;case"fontSizes":return e.FONT_SIZES;case"lineHeights":return e.LINE_HEIGHTS;case"typography":return e.TYPOGRAPHY;case"letterSpacing":return e.LETTER_SPACING;case"paragraphSpacing":return e.PARAGRAPH_SPACING;case"composition":return e.COMPOSITION;default:return e.OTHER}}(t.name.split(".").slice(0,1).toString());return u(u({},t),{},{type:r})}function l(e,t,r){return Math.min(Math.max(e,r),t)}(t=e||(e={})).OTHER="other",t.COLOR="color",t.BORDER_RADIUS="borderRadius",t.SIZING="sizing",t.SPACING="spacing",t.TEXT="text",t.TYPOGRAPHY="typography",t.OPACITY="opacity",t.BORDER_WIDTH="borderWidth",t.BOX_SHADOW="boxShadow",t.FONT_FAMILIES="fontFamilies",t.FONT_WEIGHTS="fontWeights",t.LINE_HEIGHTS="lineHeights",t.FONT_SIZES="fontSizes",t.LETTER_SPACING="letterSpacing",t.PARAGRAPH_SPACING="paragraphSpacing",t.TEXT_DECORATION="textDecoration",t.TEXT_CASE="textCase",t.COMPOSITION="composition";class h extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}function f(e){if("string"!=typeof e)throw new h(e);if("transparent"===e.trim().toLowerCase())return[0,0,0,0];let t=e.trim();t=x.test(e)?function(e){const t=e.toLowerCase().trim(),r=d[function(e){let t=5381,r=e.length;for(;r;)t=33*t^e.charCodeAt(--r);return(t>>>0)%2341}(t)];if(!r)throw new h(e);return`#${r}`}(e):e;const r=b.exec(t);if(r){const e=Array.from(r).slice(1);return[...e.slice(0,3).map((e=>parseInt(v(e,2),16))),parseInt(v(e[3]||"f",2),16)/255]}const n=m.exec(t);if(n){const e=Array.from(n).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,16))),parseInt(e[3]||"ff",16)/255]}const o=g.exec(t);if(o){const e=Array.from(o).slice(1);return[...e.slice(0,3).map((e=>parseInt(e,10))),parseFloat(e[3]||"1")]}const i=w.exec(t);if(i){const[t,r,n,o]=Array.from(i).slice(1).map(parseFloat);if(l(0,100,r)!==r)throw new h(e);if(l(0,100,n)!==n)throw new h(e);return[...S(t,r,n),o||1]}throw new h(e)}const y=e=>parseInt(e.replace(/_/g,""),36),d="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce(((e,t)=>{const r=y(t.substring(0,3)),n=y(t.substring(3)).toString(16);let o="";for(let e=0;e<6-n.length;e++)o+="0";return e[r]=`${o}${n}`,e}),{}),v=(e,t)=>Array.from(Array(t)).map((()=>e)).join(""),b=new RegExp(`^#${v("([a-f0-9])",3)}([a-f0-9])?$`,"i"),m=new RegExp(`^#${v("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),g=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${v(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),w=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,x=/^[a-z]+$/i,O=e=>Math.round(255*e),S=(e,t,r)=>{let n=r/100;if(0===t)return[n,n,n].map(O);const o=(e%360+360)%360/60,i=(1-Math.abs(2*n-1))*(t/100),s=i*(1-Math.abs(o%2-1));let a=0,u=0,c=0;o>=0&&o<1?(a=i,u=s):o>=1&&o<2?(a=s,u=i):o>=2&&o<3?(u=i,c=s):o>=3&&o<4?(u=s,c=i):o>=4&&o<5?(a=s,c=i):o>=5&&o<6&&(a=i,c=s);const p=n-i/2;return[a+p,u+p,c+p].map(O)};function A(e){const[t,r,n,o]=f(e);let i=e=>{const t=l(0,255,e).toString(16);return 1===t.length?`0${t}`:t};return`#${i(t)}${i(r)}${i(n)}${o<1?i(Math.round(255*o)):""}`}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e){try{if("string"!=typeof e)return e;var t=/#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/g,r=e;try{var n=Array.from(r.matchAll(/(rgba?\(.*?\))/g),(function(e){return e[0]})),o=Array.from(r.matchAll(/(hsla?\(.*?\))/g),(function(e){return e[0]}));o.length>0&&o.forEach((function(e){r=r.replace(e,A(e))})),n.length>0&&n.forEach((function(e){var n,o,i,s=e,a=e.replace(/rgba?\(/g,"").replace(")",""),u=a.match(t),c="1";if(u){var p,l,h=E(f(u[0]),3);n=h[0],o=h[1],i=h[2],c=null!==(p=null===(l=a.split(",").pop())||void 0===l?void 0:l.trim())&&void 0!==p?p:"0"}else{var y=a.split(",").map((function(e){return e.trim()})),d=E(y,4);n=d[0],o=d[1],i=d[2];var v=d[3];c=void 0===v?"1":v}var b,m,g=(m=(b=c).match(/(\d+%)/))?Number(m[0].slice(0,-1))/100:Number(b);r=r.split(s).join(A("rgba(".concat(n,", ").concat(o,", ").concat(i,", ").concat(g,")")))}))}catch(t){console.log("error",t,e)}return r}catch(e){console.error(e)}return null}var P,_,j,M,R,C,N=/(\$[^\s,]+\w)|({([^]*))/g,I=/(\$[^\s,]+\w)|({([^}]*)})/g,L=function(e){return null==e?void 0:e.toString().match(I)};function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(e){return!(!e||"object"!==F(e)||!("value"in e)||void 0===e.value||null===e.value||"object"===F(null==e?void 0:e.value)&&e&&"value"in e.value)}function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function U(t){return"object"===z(t)&&t.type===e.TYPOGRAPHY&&("string"==typeof t.value||"object"===z(t.value)&&!("value"in t.value))}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function W(t){return"object"===D(t)&&t.type===e.COMPOSITION&&"object"===D(t.value)&&!("value"in t.value)}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function H(e){return!!(e&&"object"===$(e)&&"value"in e&&"name"in e)}function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function q(t){return"object"===V(t)&&t.type===e.BOX_SHADOW&&("string"==typeof t.value||Array.isArray(t.value)||"object"===V(t.value)&&!("value"in t.value))}(C=P||(P={})).sizing="sizing",C.height="height",C.width="width",C.spacing="spacing",C.verticalPadding="verticalPadding",C.horizontalPadding="horizontalPadding",C.paddingTop="paddingTop",C.paddingRight="paddingRight",C.paddingBottom="paddingBottom",C.paddingLeft="paddingLeft",C.itemSpacing="itemSpacing",C.fill="fill",C.border="border",C.borderRadius="borderRadius",C.borderRadiusTopLeft="borderRadiusTopLeft",C.borderRadiusTopRight="borderRadiusTopRight",C.borderRadiusBottomRight="borderRadiusBottomRight",C.borderRadiusBottomLeft="borderRadiusBottomLeft",C.borderWidth="borderWidth",C.borderWidthTop="borderWidthTop",C.borderWidthRight="borderWidthRight",C.borderWidthBottom="borderWidthBottom",C.borderWidthLeft="borderWidthLeft",C.boxShadow="boxShadow",C.opacity="opacity",C.fontFamilies="fontFamilies",C.fontWeights="fontWeights",C.fontSizes="fontSizes",C.lineHeights="lineHeights",C.typography="typography",C.composition="composition",C.letterSpacing="letterSpacing",C.paragraphSpacing="paragraphSpacing",C.textCase="textCase",C.textDecoration="textDecoration",C.tokenValue="tokenValue",C.value="value",C.tokenName="tokenName",C.description="description",(R=_||(_={})).LOCAL="local",R.JSONBIN="jsonbin",R.GITHUB="github",R.GITLAB="gitlab",R.ADO="ado",R.URL="url",R.BITBUCKET="bitbucket",(M=j||(j={})).DROP_SHADOW="dropShadow",M.INNER_SHADOW="innerShadow";var G="INUMBER",Y="IOP1",K="IOP2",Q="IOP3",X="IVAR",Z="IVARNAME",J="IFUNCALL",ee="IFUNDEF",te="IEXPR",re="IEXPREVAL",ne="IMEMBER",oe="IENDSTATEMENT",ie="IARRAY";function se(e,t){this.type=e,this.value=null!=t?t:0}function ae(e){return new se(Y,e)}function ue(e){return new se(K,e)}function ce(e){return new se(Q,e)}function pe(e,t,r,n,o){for(var i,s,a,u,c=[],p=[],l=0;l<e.length;l++){var h=e[l],f=h.type;if(f===G||f===Z)Array.isArray(h.value)?c.push.apply(c,pe(h.value.map((function(e){return new se(G,e)})).concat(new se(ie,h.value.length)),t,r,n,o)):c.push(h);else if(f===X&&o.hasOwnProperty(h.value))h=new se(G,o[h.value]),c.push(h);else if(f===K&&c.length>1)s=c.pop(),i=c.pop(),u=r[h.value],h=new se(G,u(i.value,s.value)),c.push(h);else if(f===Q&&c.length>2)a=c.pop(),s=c.pop(),i=c.pop(),"?"===h.value?c.push(i.value?s.value:a.value):(u=n[h.value],h=new se(G,u(i.value,s.value,a.value)),c.push(h));else if(f===Y&&c.length>0)i=c.pop(),u=t[h.value],h=new se(G,u(i.value)),c.push(h);else if(f===te){for(;c.length>0;)p.push(c.shift());p.push(new se(te,pe(h.value,t,r,n,o)))}else if(f===ne&&c.length>0)i=c.pop(),c.push(new se(G,i.value[h.value]));else{for(;c.length>0;)p.push(c.shift());p.push(h)}}for(;c.length>0;)p.push(c.shift());return p}function le(e,t,r){for(var n=[],o=0;o<e.length;o++){var i=e[o],s=i.type;if(s===X&&i.value===t)for(var a=0;a<r.tokens.length;a++){var u,c=r.tokens[a];u=c.type===Y?ae(c.value):c.type===K?ue(c.value):c.type===Q?ce(c.value):new se(c.type,c.value),n.push(u)}else s===te?n.push(new se(te,le(i.value,t,r))):n.push(i)}return n}function he(e,t,r){var n,o,i,s,a,u,c=[];if(ye(e))return de(e,r);for(var p=e.length,l=0;l<p;l++){var h=e[l],f=h.type;if(f===G||f===Z)c.push(h.value);else if(f===K)o=c.pop(),n=c.pop(),"and"===h.value?c.push(!!n&&!!he(o,t,r)):"or"===h.value?c.push(!!n||!!he(o,t,r)):"="===h.value?(s=t.binaryOps[h.value],c.push(s(n,he(o,t,r),r))):(s=t.binaryOps[h.value],c.push(s(de(n,r),de(o,r))));else if(f===Q)i=c.pop(),o=c.pop(),n=c.pop(),"?"===h.value?c.push(he(n?o:i,t,r)):(s=t.ternaryOps[h.value],c.push(s(de(n,r),de(o,r),de(i,r))));else if(f===X)if(h.value in t.functions)c.push(t.functions[h.value]);else if(h.value in t.unaryOps&&t.parser.isOperatorEnabled(h.value))c.push(t.unaryOps[h.value]);else{var y=r[h.value];if(void 0===y)throw new Error("undefined variable: "+h.value);c.push(y)}else if(f===Y)n=c.pop(),s=t.unaryOps[h.value],c.push(s(de(n,r)));else if(f===J){for(u=h.value,a=[];u-- >0;)a.unshift(de(c.pop(),r));if(!(s=c.pop()).apply||!s.call)throw new Error(s+" is not a function");c.push(s.apply(void 0,a))}else if(f===ee)c.push(function(){for(var e=c.pop(),n=[],o=h.value;o-- >0;)n.unshift(c.pop());var i=c.pop(),s=function(){for(var o=Object.assign({},r),i=0,s=n.length;i<s;i++)o[n[i]]=arguments[i];return he(e,t,o)};return Object.defineProperty(s,"name",{value:i,writable:!1}),r[i]=s,s}());else if(f===te)c.push(fe(h,t));else if(f===re)c.push(h);else if(f===ne)n=c.pop(),c.push(n[h.value]);else if(f===oe)c.pop();else{if(f!==ie)throw new Error("invalid Expression");for(u=h.value,a=[];u-- >0;)a.unshift(c.pop());c.push(a)}}if(c.length>1)throw new Error("invalid Expression (parity)");return 0===c[0]?0:de(c[0],r)}function fe(e,t,r){return ye(e)?e:{type:re,value:function(r){return he(e.value,t,r)}}}function ye(e){return e&&e.type===re}function de(e,t){return ye(e)?e.value(t):e}function ve(e,t){for(var r,n,o,i,s,a,u=[],c=0;c<e.length;c++){var p=e[c],l=p.type;if(l===G)"number"==typeof p.value&&p.value<0?u.push("("+p.value+")"):Array.isArray(p.value)?u.push("["+p.value.map(be).join(", ")+"]"):u.push(be(p.value));else if(l===K)n=u.pop(),r=u.pop(),i=p.value,t?"^"===i?u.push("Math.pow("+r+", "+n+")"):"and"===i?u.push("(!!"+r+" && !!"+n+")"):"or"===i?u.push("(!!"+r+" || !!"+n+")"):"||"===i?u.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+r+"),("+n+")))"):"=="===i?u.push("("+r+" === "+n+")"):"!="===i?u.push("("+r+" !== "+n+")"):"["===i?u.push(r+"[("+n+") | 0]"):u.push("("+r+" "+i+" "+n+")"):"["===i?u.push(r+"["+n+"]"):u.push("("+r+" "+i+" "+n+")");else if(l===Q){if(o=u.pop(),n=u.pop(),r=u.pop(),"?"!==(i=p.value))throw new Error("invalid Expression");u.push("("+r+" ? "+n+" : "+o+")")}else if(l===X||l===Z)u.push(p.value);else if(l===Y)r=u.pop(),"-"===(i=p.value)||"+"===i?u.push("("+i+r+")"):t?"not"===i?u.push("(!"+r+")"):"!"===i?u.push("fac("+r+")"):u.push(i+"("+r+")"):"!"===i?u.push("("+r+"!)"):u.push("("+i+" "+r+")");else if(l===J){for(a=p.value,s=[];a-- >0;)s.unshift(u.pop());i=u.pop(),u.push(i+"("+s.join(", ")+")")}else if(l===ee){for(n=u.pop(),a=p.value,s=[];a-- >0;)s.unshift(u.pop());r=u.pop(),t?u.push("("+r+" = function("+s.join(", ")+") { return "+n+" })"):u.push("("+r+"("+s.join(", ")+") = "+n+")")}else if(l===ne)r=u.pop(),u.push(r+"."+p.value);else if(l===ie){for(a=p.value,s=[];a-- >0;)s.unshift(u.pop());u.push("["+s.join(", ")+"]")}else if(l===te)u.push("("+ve(p.value,t)+")");else if(l!==oe)throw new Error("invalid Expression")}return u.length>1&&(u=t?[u.join(",")]:[u.join(";")]),String(u[0])}function be(e){return"string"==typeof e?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function me(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}function ge(e,t,r){for(var n=!!(r=r||{}).withMembers,o=null,i=0;i<e.length;i++){var s=e[i];s.type===X||s.type===Z?n||me(t,s.value)?null!==o?(me(t,o)||t.push(o),o=s.value):o=s.value:t.push(s.value):s.type===ne&&n&&null!==o?o+="."+s.value:s.type===te?ge(s.value,t,r):null!==o&&(me(t,o)||t.push(o),o=null)}null===o||me(t,o)||t.push(o)}function we(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}se.prototype.toString=function(){switch(this.type){case G:case Y:case K:case Q:case X:case Z:case oe:return this.value;case J:return"CALL "+this.value;case ee:return"DEF "+this.value;case ie:return"ARRAY "+this.value;case ne:return"."+this.value;default:return"Invalid Instruction"}},we.prototype.simplify=function(e){return e=e||{},new we(pe(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)},we.prototype.substitute=function(e,t){return t instanceof we||(t=this.parser.parse(String(t))),new we(le(this.tokens,e,t),this.parser)},we.prototype.evaluate=function(e){return e=e||{},he(this.tokens,this,e)},we.prototype.toString=function(){return ve(this.tokens,!1)},we.prototype.symbols=function(e){e=e||{};var t=[];return ge(this.tokens,t,e),t},we.prototype.variables=function(e){e=e||{};var t=[];ge(this.tokens,t,e);var r=this.functions;return t.filter((function(e){return!(e in r)}))},we.prototype.toJSFunction=function(e,t){var r=this,n=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+ve(this.simplify(t).tokens,!0)+"; }");return function(){return n.apply(r,arguments)}};var xe="TEOF",Oe="TOP",Se="TNUMBER",Ae="TSTRING",Ee="TPAREN",ke="TBRACKET",Te="TCOMMA",Pe="TNAME",_e="TSEMICOLON";function je(e,t,r){this.type=e,this.value=t,this.index=r}function Me(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}je.prototype.toString=function(){return this.type+": "+this.value},Me.prototype.newToken=function(e,t,r){return new je(e,t,null!=r?r:this.pos)},Me.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current},Me.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent},Me.prototype.next=function(){return this.pos>=this.expression.length?this.newToken(xe,"EOF"):this.isWhitespace()||this.isComment()?this.next():this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName()?this.current:void this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')},Me.prototype.isString=function(){var e=!1,t=this.pos,r=this.expression.charAt(t);if("'"===r||'"'===r)for(var n=this.expression.indexOf(r,t+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,"\\"!==this.expression.charAt(n-1)){var o=this.expression.substring(t+1,n);this.current=this.newToken(Ae,this.unescape(o),t),e=!0;break}n=this.expression.indexOf(r,n+1)}return e},Me.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return("("===e||")"===e)&&(this.current=this.newToken(Ee,e),this.pos++,!0)},Me.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return!("["!==e&&"]"!==e||!this.isOperatorEnabled("[")||(this.current=this.newToken(ke,e),this.pos++,0))},Me.prototype.isComma=function(){return","===this.expression.charAt(this.pos)&&(this.current=this.newToken(Te,","),this.pos++,!0)},Me.prototype.isSemicolon=function(){return";"===this.expression.charAt(this.pos)&&(this.current=this.newToken(_e,";"),this.pos++,!0)},Me.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||"_"!==r&&"."!==r&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(n in this.consts)return this.current=this.newToken(Se,this.consts[n]),this.pos+=n.length,!0}return!1},Me.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||"_"!==r&&(r<"0"||r>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(Oe,n),this.pos+=n.length,!0}return!1},Me.prototype.isName=function(){for(var e=this.pos,t=e,r=!1;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()){if(t===this.pos&&("$"===n||"_"===n)){"_"===n&&(r=!0);continue}if(t===this.pos||!r||"_"!==n&&(n<"0"||n>"9"))break}else r=!0}if(r){var o=this.expression.substring(e,t);return this.current=this.newToken(Pe,o),this.pos+=o.length,!0}return!1},Me.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);!(" "!==t&&"\t"!==t&&"\n"!==t&&"\r"!==t||(e=!0,this.pos++,this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var Re=/^[0-9a-f]{4}$/i;function Ce(e,t,r){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=!1!==r.allowMemberAccess}Me.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var r=e.substring(0,t);t>=0;){var n=e.charAt(++t);switch(n){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"u":var o=e.substring(t+1,t+5);Re.test(o)||this.parseError("Illegal escape sequence: \\u"+o),r+=String.fromCharCode(parseInt(o,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++t;var i=e.indexOf("\\",t);r+=e.substring(t,i<0?e.length:i),t=i}return r},Me.prototype.isComment=function(){return"/"===this.expression.charAt(this.pos)&&"*"===this.expression.charAt(this.pos+1)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)},Me.prototype.isRadixInteger=function(){var e,t,r=this.pos;if(r>=this.expression.length-2||"0"!==this.expression.charAt(r))return!1;if(++r,"x"===this.expression.charAt(r))e=16,t=/^[0-9a-f]$/i,++r;else{if("b"!==this.expression.charAt(r))return!1;e=2,t=/^[01]$/i,++r}for(var n=!1,o=r;r<this.expression.length;){var i=this.expression.charAt(r);if(!t.test(i))break;r++,n=!0}return n&&(this.current=this.newToken(Se,parseInt(this.expression.substring(o,r),e)),this.pos=r),n},Me.prototype.isNumber=function(){for(var e,t=!1,r=this.pos,n=r,o=r,i=!1,s=!1;r<this.expression.length&&((e=this.expression.charAt(r))>="0"&&e<="9"||!i&&"."===e);)"."===e?i=!0:s=!0,r++,t=s;if(t&&(o=r),"e"===e||"E"===e){r++;for(var a=!0,u=!1;r<this.expression.length;){if(e=this.expression.charAt(r),!a||"+"!==e&&"-"!==e){if(!(e>="0"&&e<="9"))break;u=!0,a=!1}else a=!1;r++}u||(r=o)}return t?(this.current=this.newToken(Se,parseFloat(this.expression.substring(n,r))),this.pos=r):this.pos=o,t},Me.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if("+"===t||"-"===t||"*"===t||"/"===t||"%"===t||"^"===t||"?"===t||":"===t||"."===t)this.current=this.newToken(Oe,t);else if("∙"===t||"•"===t)this.current=this.newToken(Oe,"*");else if(">"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Oe,">="),this.pos++):this.current=this.newToken(Oe,">");else if("<"===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Oe,"<="),this.pos++):this.current=this.newToken(Oe,"<");else if("|"===t){if("|"!==this.expression.charAt(this.pos+1))return!1;this.current=this.newToken(Oe,"||"),this.pos++}else if("="===t)"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Oe,"=="),this.pos++):this.current=this.newToken(Oe,t);else{if("!"!==t)return!1;"="===this.expression.charAt(this.pos+1)?(this.current=this.newToken(Oe,"!="),this.pos++):this.current=this.newToken(Oe,t)}return this.pos++,!!this.isOperatorEnabled(this.current.value)||(this.pos=e,!1)},Me.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)},Me.prototype.getCoordinates=function(){var e,t=0,r=-1;do{t++,e=this.pos-r,r=this.expression.indexOf("\n",r+1)}while(r>=0&&r<this.pos);return{line:t,column:e}},Me.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)},Ce.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()},Ce.prototype.tokenMatches=function(e,t){return void 0===t||(Array.isArray(t)?me(t,e.value):"function"==typeof t?t(e):e.value===t)},Ce.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()},Ce.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken},Ce.prototype.accept=function(e,t){return!(this.nextToken.type!==e||!this.tokenMatches(this.nextToken,t)||(this.next(),0))},Ce.prototype.expect=function(e,t){if(!this.accept(e,t)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(t||e))}},Ce.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;if(this.accept(Pe)||this.accept(Oe,(function(e){return e.value in t})))e.push(new se(X,this.current.value));else if(this.accept(Se))e.push(new se(G,this.current.value));else if(this.accept(Ae))e.push(new se(G,this.current.value));else if(this.accept(Ee,"("))this.parseExpression(e),this.expect(Ee,")");else{if(!this.accept(ke,"["))throw new Error("unexpected "+this.nextToken);if(this.accept(ke,"]"))e.push(new se(ie,0));else{var r=this.parseArrayList(e);e.push(new se(ie,r))}}},Ce.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),this.parseUntilEndStatement(e,t)||this.pushExpression(e,t))},Ce.prototype.pushExpression=function(e,t){for(var r=0,n=t.length;r<n;r++)e.push(t[r])},Ce.prototype.parseUntilEndStatement=function(e,t){return!!this.accept(_e)&&(!this.nextToken||this.nextToken.type===xe||this.nextToken.type===Ee&&")"===this.nextToken.value||t.push(new se(oe)),this.nextToken.type!==xe&&this.parseExpression(t),e.push(new se(te,t)),!0)},Ce.prototype.parseArrayList=function(e){for(var t=0;!this.accept(ke,"]");)for(this.parseExpression(e),++t;this.accept(Te);)this.parseExpression(e),++t;return t},Ce.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(Oe,"=");){var t=e.pop(),r=[],n=e.length-1;if(t.type!==J){if(t.type!==X&&t.type!==ne)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),e.push(new se(Z,t.value)),e.push(new se(te,r)),e.push(ue("="))}else{if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var o=0,i=t.value+1;o<i;o++){var s=n-o;e[s].type===X&&(e[s]=new se(Z,e[s].value))}this.parseVariableAssignmentExpression(r),e.push(new se(te,r)),e.push(new se(ee,t.value))}}},Ce.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(Oe,"?");){var t=[],r=[];this.parseConditionalExpression(t),this.expect(Oe,":"),this.parseConditionalExpression(r),e.push(new se(te,t)),e.push(new se(te,r)),e.push(ce("?"))}},Ce.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(Oe,"or");){var t=[];this.parseAndExpression(t),e.push(new se(te,t)),e.push(ue("or"))}},Ce.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(Oe,"and");){var t=[];this.parseComparison(t),e.push(new se(te,t)),e.push(ue("and"))}};var Ne=["==","!=","<","<=",">=",">","in"];Ce.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(Oe,Ne);){var t=this.current;this.parseAddSub(e),e.push(ue(t.value))}};var Ie=["+","-","||"];Ce.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(Oe,Ie);){var t=this.current;this.parseTerm(e),e.push(ue(t.value))}};var Le=["*","/","%"];function Fe(e,t){return Number(e)+Number(t)}function Be(e,t){return e-t}function ze(e,t){return e*t}function Ue(e,t){return e/t}function De(e,t){return e%t}function We(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function $e(e,t){return e===t}function He(e,t){return e!==t}function Ve(e,t){return e>t}function qe(e,t){return e<t}function Ge(e,t){return e>=t}function Ye(e,t){return e<=t}function Ke(e,t){return Boolean(e&&t)}function Qe(e,t){return Boolean(e||t)}function Xe(e,t){return me(t,e)}function Ze(e){return(Math.exp(e)-Math.exp(-e))/2}function Je(e){return(Math.exp(e)+Math.exp(-e))/2}function et(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function tt(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function rt(e){return Math.log(e+Math.sqrt(e*e-1))}function nt(e){return Math.log((1+e)/(1-e))/2}function ot(e){return Math.log(e)*Math.LOG10E}function it(e){return-e}function st(e){return!e}function at(e){return e<0?Math.ceil(e):Math.floor(e)}function ut(e){return Math.random()*(e||1)}function ct(e){return lt(e+1)}Ce.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(Oe,Le);){var t=this.current;this.parseFactor(e),e.push(ue(t.value))}},Ce.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;if(this.save(),this.accept(Oe,(function(e){return e.value in t}))){if("-"!==this.current.value&&"+"!==this.current.value){if(this.nextToken.type===Ee&&"("===this.nextToken.value)return this.restore(),void this.parseExponential(e);if(this.nextToken.type===_e||this.nextToken.type===Te||this.nextToken.type===xe||this.nextToken.type===Ee&&")"===this.nextToken.value)return this.restore(),void this.parseAtom(e)}var r=this.current;this.parseFactor(e),e.push(ae(r.value))}else this.parseExponential(e)},Ce.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(Oe,"^");)this.parseFactor(e),e.push(ue("^"))},Ce.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(Oe,"!");)e.push(ae("!"))},Ce.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;if(this.accept(Oe,(function(e){return e.value in t}))){var r=this.current;this.parseAtom(e),e.push(ae(r.value))}else for(this.parseMemberExpression(e);this.accept(Ee,"(");)if(this.accept(Ee,")"))e.push(new se(J,0));else{var n=this.parseArgumentList(e);e.push(new se(J,n))}},Ce.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(Ee,")");)for(this.parseExpression(e),++t;this.accept(Te);)this.parseExpression(e),++t;return t},Ce.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(Oe,".")||this.accept(ke,"[");){var t=this.current;if("."===t.value){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(Pe),e.push(new se(ne,this.current.value))}else{if("["!==t.value)throw new Error("unexpected symbol: "+t.value);if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(ke,"]"),e.push(ue("["))}}};var pt=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function lt(e){var t,r;if(function(e){return isFinite(e)&&e===Math.round(e)}(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var n=e-2,o=e-1;n>1;)o*=n,n--;return 0===o&&(o=1),o}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*lt(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,s=i*e,a=s*e,u=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*s)-571/(2488320*a)+163879/(209018880*u)+5246819/(75246796800*u*e))}--e,r=pt[0];for(var c=1;c<pt.length;++c)r+=pt[c]/(e+c);return t=e+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*r}function ht(e){return Array.isArray(e)?e.length:String(e).length}function ft(){for(var e=0,t=0,r=0;r<arguments.length;r++){var n,o=Math.abs(arguments[r]);t<o?(e=e*(n=t/o)*n+1,t=o):e+=o>0?(n=o/t)*n:o}return t===1/0?1/0:t*Math.sqrt(e)}function yt(e,t,r){return e?t:r}function dt(e,t){return void 0===t||0==+t?Math.round(e):(e=+e,t=-+t,isNaN(e)||"number"!=typeof t||t%1!=0?NaN:(e=e.toString().split("e"),+((e=(e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t)))).toString().split("e"))[0]+"e"+(e[1]?+e[1]+t:t))))}function vt(e,t,r){return r&&(r[e]=t),t}function bt(e,t){return e[0|t]}function mt(e){return 1===arguments.length&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function gt(e){return 1===arguments.length&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function wt(e,t){if("function"!=typeof e)throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map((function(t,r){return e(t,r)}))}function xt(e,t,r){if("function"!=typeof e)throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce((function(t,r,n){return e(t,r,n)}),t)}function Ot(e,t){if("function"!=typeof e)throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter((function(t,r){return e(t,r)}))}function St(e,t){if(!Array.isArray(t)&&"string"!=typeof t)throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function At(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Et(e){return(e>0)-(e<0)||+e}var kt=1/3;function Tt(e){return e<0?-Math.pow(-e,kt):Math.pow(e,kt)}function Pt(e){return Math.exp(e)-1}function _t(e){return Math.log(1+e)}function jt(e){return Math.log(e)/Math.LN2}function Mt(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Ze,cosh:Math.cosh||Je,tanh:Math.tanh||et,asinh:Math.asinh||tt,acosh:Math.acosh||rt,atanh:Math.atanh||nt,sqrt:Math.sqrt,cbrt:Math.cbrt||Tt,log:Math.log,log2:Math.log2||jt,ln:Math.log,lg:Math.log10||ot,log10:Math.log10||ot,expm1:Math.expm1||Pt,log1p:Math.log1p||_t,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||at,"-":it,"+":Number,exp:Math.exp,not:st,length:ht,"!":ct,sign:Math.sign||Et},this.binaryOps={"+":Fe,"-":Be,"*":ze,"/":Ue,"%":De,"^":Math.pow,"||":We,"==":$e,"!=":He,">":Ve,"<":qe,">=":Ge,"<=":Ye,and:Ke,or:Qe,in:Xe,"=":vt,"[":bt},this.ternaryOps={"?":yt},this.functions={random:ut,fac:ct,min:gt,max:mt,hypot:Math.hypot||ft,pyt:Math.hypot||ft,pow:Math.pow,atan2:Math.atan2,if:yt,gamma:lt,roundTo:dt,map:wt,fold:xt,filter:Ot,indexOf:St,join:At},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}Mt.prototype.parse=function(e){var t=[],r=new Ce(this,new Me(this,e),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(t),r.expect(xe,"EOF"),new we(t,this)},Mt.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Rt=new Mt;Mt.parse=function(e){return Rt.parse(e)},Mt.evaluate=function(e,t){return Rt.parse(e).evaluate(t)};var Ct={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};Mt.prototype.isOperatorEnabled=function(e){var t=function(e){return Ct.hasOwnProperty(e)?Ct[e]:e}(e),r=this.options.operators||{};return!(t in r)||!!r[t]};var Nt,It=r(784),Lt=new Mt;function Ft(e){var t;try{t=It.ZP.parse(e)}catch(t){return e}var r,n=It.ZP.reduceExpression(t),o=e,i="";n&&"Number"!==n.type&&(o=e.replace(new RegExp(n.unit,"ig"),""),i=n.unit);try{r=Lt.evaluate(o)}catch(t){return e}try{return i?"".concat(r).concat(i):Number.parseFloat(r.toFixed(3))}catch(t){return e}}function Bt(e){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(e)}function zt(t){return"object"!==Bt(t)||"object"!==Bt(t.value)||(null==t?void 0:t.type)!==e.BOX_SHADOW&&(null==t?void 0:t.type)!==e.TYPOGRAPHY?B(t)?t.value.toString():t.toString():t.value}function Ut(e,t,r){if("object"===Bt(r))return r;if(e&&("string"==typeof e||"number"==typeof e)){var n=Ft(String(r));return e.replace(t,String(n))}return e}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=zt(e);try{var n="string"==typeof r?L(r):null;if(null!=n&&n.length){var o=Array.from(n).map((function(r){if(r.length>1){var n,o;if(o=r.startsWith("{")?r.endsWith("}")?r.slice(1,r.length-1):r.slice(1,r.length):r.substring(1),"object"===Bt(e)&&o===e.name||o===e)return B(e)?e.value.toString():e.toString();var i=o.split("."),s=i.pop(),a=i.join("."),u=Number(i.pop()),c=i.join("."),p=t.find((function(e){return e.name===o||e.name===a||e.name===c}));if((null==p?void 0:p.name)===o)return Dt(p,t);if(s&&(null==p?void 0:p.name)===a&&null!==(n=p.rawValue)&&void 0!==n&&n.hasOwnProperty(s)){var l=p.rawValue;if("object"===Bt(l)&&!Array.isArray(l))return Dt(l[s],t)}if(void 0!==u&&s&&(null==p?void 0:p.name)===c&&Array.isArray(null==p?void 0:p.rawValue)&&null!=p&&p.rawValue[u]&&null!=p&&p.rawValue[u].hasOwnProperty(s))return Dt((null==p?void 0:p.rawValue[u])[s]||u,t)}return r}));n.forEach((function(e,t){var n=o[t];r=Ut(r,e,n)})),"null"===r&&(r=null)}if(r&&"string"==typeof r){var i=L(r);if(!i){var s=Ft(r);return"number"==typeof s?s:T(s)}}}catch(r){return console.log("Error getting alias value of ".concat(JSON.stringify(e,null,2)),t),null}return r&&"string"==typeof r?Ft(r):r}function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function $t(e){return!!e&&Boolean(e.toString().match(N))}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qt(t){return t.filter((function(r){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{var n=!1;if("string"==typeof t)n=Boolean(t.match(I));else if(t.type===e.TYPOGRAPHY||t.type===e.BOX_SHADOW)n="string"==typeof t.value?Boolean(String(t.value).match(I)):(Array.isArray(t.value)?t.value:[t.value]).some((function(e){return Object.values(e).some((function(e){return Boolean(null==e?void 0:e.toString().match(I))}))}));else{if(t.type===e.COMPOSITION)return!0;n=Boolean(t.value.toString().match(I))}if(n)return null!=Dt(t,r)}catch(e){console.log("Error checking alias of token ".concat("object"===Wt(t)?t.name:t),t,r,e)}return!1}(r,t.filter(H))}))}function Xt(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Qt(t),i=t;return i=t.map((function(t,r,n){var i,s=!1;if(t.type===e.TYPOGRAPHY||t.type===e.BOX_SHADOW)"string"==typeof t.value?(i=Dt(t.value,n),s=null===i||$t("string"==typeof i?i:"")):i=Array.isArray(t.value)?t.value.map((function(e){return Object.entries(e).reduce((function(e,t){var r=Yt(t,2),o=r[0],i=r[1];return e[o]=Dt(i,n),(null===e[o]||$t("string"==typeof e[o]?e[o]:""))&&(s=!0),e}),{})})):Object.entries(t.value).reduce((function(e,t){var r=Yt(t,2),o=r[0],i=r[1];return e[o]=Dt(i,n),(null===e[o]||$t("string"==typeof e[o]?e[o]:""))&&(s=!0),e}),{});else if(t.type===e.COMPOSITION){var a={};Object.entries(t.value).forEach((function(e){var t=Yt(e,2),r=t[0],o=t[1];if(Array.isArray(o)){var i=o.map((function(e){return Object.entries(e).reduce((function(e,t){var r=Yt(t,2),o=r[0],i=r[1];return e[o]=Dt(i,n),(null===e[o]||$t(e[o]))&&(s=!0),e}),{})}));a[r]=i}else if("object"===Gt(o)){var u=Object.entries(o).reduce((function(e,t){var r=Yt(t,2),o=r[0],i=r[1];return e[o]=Dt(i,n),(null===e[o]||$t(e[o]))&&(s=!0),e}),{});a[r]=u}else{var c=Dt(o,n);null!==c&&(a[r]=c),(null===c||$t(c))&&(s=!0)}})),i=a}else i=Dt(t,n),s=null===i||$t("string"==typeof i?i:"");return Vt(Vt({},o(t,"failedToResolve")),{},{value:i,rawValue:t.rawValue||t.value},s?{failedToResolve:s}:{})})),n.length>0&&(r>n.length||!r)?Xt(i,n.length):i}function Zt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=Object.entries(t).filter((function(e){var t=Yt(e,2)[1];return t===Nt.ENABLED||t===Nt.SOURCE})).map((function(e){return Yt(e,1)[0]}));return Object.entries(e).reverse().forEach((function(e){(0===n.length||n.includes(e[0]))&&e[1].forEach((function(t){r.some((function(e){return e.name===t.name}))||r.push(Vt(Vt({},p(t)),{},{internal__Parent:e[0]}))}))})),r}function Jt(e){var t="";switch(e){case P.width:case P.height:t=P.sizing;break;case P.itemSpacing:case P.verticalPadding:case P.horizontalPadding:case P.paddingTop:case P.paddingLeft:case P.paddingBottom:case P.paddingRight:t=P.spacing;break;case P.borderRadiusTopLeft:case P.borderRadiusTopRight:case P.borderRadiusBottomLeft:case P.borderRadiusBottomRight:t=P.borderRadius;break;case P.border:t=P.fill;break;case P.borderWidthTop:case P.borderWidthLeft:case P.borderWidthRight:case P.borderWidthBottom:t=P.borderWidth;break;default:t=e}return t}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tr(e){return Object.entries(e).reduce((function(e,t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=r[0],o=r[1];return e[n]="string"==typeof o||"number"==typeof o?{value:o,type:Jt(n)}:tr(o),e}),{})}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nr(e,t,r){var n=e;return"string"==typeof t&&e.toString()!==t&&(!1===r.resolveReferences&&(n=t),"math"===r.resolveReferences)&&("number"==typeof e?/^{[^}]*}$|^\$[^$]*$/:/{[^}]*}|\$[\w.-]*/g).test(t)&&(n=t),n}function or(e,t,r){return Object.entries(e).reduce((function(e,n){var o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,2),i=o[0],s=o[1],a=t[i];return e[i]=nr(s,a,r),e}),{})}function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(t,r,n){var o;return o=t.reduce((function(t,o){if(n.throwErrorWhenNotResolved&&o.failedToResolve)throw new Error('ERROR: failed to resolve token "'.concat(o.name,'"'));if(o.internal__Parent&&r.includes(o.internal__Parent))return t;var i=t||{},a=p(o);if(delete a.name,!0!==n.resolveReferences&&(a.value=function(t,r){if(void 0===t.rawValue)return t.value;if(t.type===e.TYPOGRAPHY||t.type===e.BOX_SHADOW||t.type===e.COMPOSITION){if(Array.isArray(t.value)){var n=t.rawValue;return t.value.map((function(e,t){return or(e,n[t],r)}))}return or(t.value,t.rawValue,r)}return nr(t.value,t.rawValue,r)}(a,n)),n.preserveRawValue||delete a.rawValue,delete a.internal__Parent,n.expandTypography&&a.type===e.TYPOGRAPHY||n.expandShadow&&a.type===e.BOX_SHADOW||n.expandComposition&&a.type===e.COMPOSITION){var u=tr(a.value);s()(i,o.name,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){sr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u))}else s()(i,o.name,a);return t}),{}),o}function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(r),!0).forEach((function(t){fr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yr(e){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yr(e)}function dr(e){var t,r,n=e.obj,o=e.token,i=e.root,s=void 0===i?null:i,a=e.returnValuesOnly,u=void 0!==a&&a,c=e.expandTypography,p=void 0!==c&&c,l=e.expandShadow,h=void 0!==l&&l,f=e.expandComposition,y=void 0!==f&&f,d=e.inheritType,v=e.groupLevel,b=void 0===v?0:v,m=e.currentTypeLevel,g=void 0===m?0:m,w=!(!p||"object"!==yr(o)||!("value"in o))&&U(o.value),x=!(!h||"object"!==yr(o)||!("value"in o))&&q(o.value),O=!(!y||"object"!==yr(o)||!("value"in o))&&W(o.value);if(!B(o)||w||x||O)if(U(o)&&!p||q(o)&&!h||W(o)&&!y)r={type:o.type,value:Object.entries(o).reduce((function(e,t){var r=cr(t,2),n=r[0],o=r[1];return e[n]=B(o)&&u?o.value:o,e}),{})},o.description&&(delete r.value.description,r.description=o.description);else if("object"===yr(o)){var S=o;if(B(o)||(b+=1),function(e){return!!(e&&"object"===ur(e)&&(!("value"in e)||"value"in e&&"object"===ur(e.value)&&"value"in e.value)&&"type"in e&&"string"==typeof e.type)}(o)){o.type;var A=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(o,["type"]);d=o.type,g=b,S=A}B(o)&&"string"!=typeof o.value&&(S=o.value),Object.entries(S).forEach((function(e){var t=cr(e,2),r=t[0],o=t[1],i=dr({obj:n,token:o,root:[s,r].filter((function(e){return e})).join("."),returnValuesOnly:u,expandTypography:p,expandShadow:h,expandComposition:y,inheritType:d,groupLevel:b,currentTypeLevel:g}),a=cr(i,2)[1];s&&a?n.push(hr(hr({},a),{},{name:[s,r].join(".")})):a&&n.push(hr(hr({},a),{},{name:r}))}))}else r={value:o};else r=hr(hr({},o),!("type"in o)&&d?{type:d,inheritTypeLevel:g}:{});return"object"===yr(r)&&"name"in r&&null!==(t=r)&&void 0!==t&&t.name&&(r.name=r.name.split("/").join(".")),[n,r]}function vr(e){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(e)}function br(e){if(Array.isArray(e))return{global:e};var t=Object.entries(e).reduce((function(e,t){var r,n,o,i,s,a,u=t[1];if(Array.isArray(u))return e.push([t[0],u]),e;if("object"===vr(u)){var c=(a=cr(dr({obj:[],root:null,token:(r={tokens:u}).tokens,returnValuesOnly:void 0!==(n=r.returnValuesOnly)&&n,expandTypography:void 0!==(o=r.expandTypography)&&o,expandShadow:void 0!==(i=r.expandShadow)&&i,expandComposition:void 0!==(s=r.expandComposition)&&s}),1)[0],Object.values(a));return e.push([t[0],c]),e}return e}),[]);return Object.fromEntries(t)}!function(e){e.DISABLED="disabled",e.SOURCE="source",e.ENABLED="enabled"}(Nt||(Nt={}));const mr=function(e,t,r,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{expandTypography:!1,expandShadow:!1,expandComposition:!1,preserveRawValue:!1,resolveReferences:!0};return ar(Xt(Zt(br(e),Object.fromEntries(t.map((function(e){return[e,Nt.ENABLED]}))))),r,n)}(e,t,r,n)}})(),module.exports.tokenTransformer=n})();